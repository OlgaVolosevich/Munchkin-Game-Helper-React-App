(this.webpackJsonpmunchkin=this.webpackJsonpmunchkin||[]).push([[0],[,,,,,,,,function(e,a,t){},,,,,,,function(e,a,t){},function(e,a,t){},,function(e,a,t){},function(e,a,t){},function(e,a,t){"use strict";t.r(a);var n=t(1),s=t.n(n),r=t(10),l=t.n(r),c=t(3),i=t(2),o=t(4),d=t(5),m=t(7),u=t(6),g=(t(15),t(16),t(8),t(0));var j=function(e){var a=e.name,t=e.deletePlayer,n=e.id;return Object(g.jsxs)("div",{className:"players-cards__item__name",children:[Object(g.jsx)("p",{children:a}),Object(g.jsx)("span",{className:"icon-bin",onClick:function(){return t(n)}})]})};var p=function(e){var a=e.content,t=e.toggleModal;return Object(g.jsxs)("div",{className:"edit-modal",children:[a,Object(g.jsx)("span",{onClick:t,className:"edit-modal__close-btn icon-cancel-circle"})]})};var b=function(e){var a=e.changeGender,t=e.id,n=e.toggleModal,s=[{value:"\u041c\u0443\u0436\u0447\u0438\u043d\u0430",name:"gender"},{value:"\u0416\u0435\u043d\u0449\u0438\u043d\u0430",name:"gender"}].map((function(e,s){var r=e.value,l=e.name;return Object(g.jsx)("button",{className:"edit-modal__gender-btn",onClick:function(){return function(e,t,s){a(e,t,s),n()}(t,l,r)},children:r},s)}));return Object(g.jsx)(g.Fragment,{children:s})};var f=function(e){var a=e.title,t=e.name,n=e.value,s=e.inputHandler,r=e.options,l=e.id;return Object(g.jsxs)("div",{className:"select-input",children:[Object(g.jsxs)("label",{htmlFor:t,children:[a," "]}),Object(g.jsx)("select",{id:t,name:t,value:n,onChange:function(e){return s(e,l,t)},children:r.map((function(e,a){return Object(g.jsx)("option",{children:e},a)}))})]})},v=function(e){Object(m.a)(t,e);var a=Object(u.a)(t);function t(e){var n;return Object(o.a)(this,t),(n=a.call(this,e)).toggleModal=function(){return n.setState((function(e){return{isInfoEdited:!e.isInfoEdited}}))},n.clickHandler=function(e){var a=n.props,t=a.editPlayerInfo,s=a.id,r=e.target.classList[0],l=e.target.classList[1],c=Object(i.a)({},n.state.gameClassOptions),o=Object(i.a)({},n.state.gameRaceOptions),d=function(e,a,s){"first"===l?(t(a,s,e.target.value,l),"gameClass"===e.target.id?n.setState({gameClassOptions:c}):"gameRace"===e.target.id&&(o.value.first=e.target.value,n.setState({gameRaceOptions:o}))):"second"===l&&(t(a,s,e.target.value,l),"gameClass"===e.target.id?n.setState({gameClassOptions:c}):"gameRace"===e.target.id&&(o.value.second=e.target.value,n.setState({gameRaceOptions:o}))),n.toggleModal()};if("gender-btn"===r){var m=Object(g.jsx)(b,{id:s,toggleModal:n.toggleModal,changeGender:t});n.setState({modal:Object(g.jsx)(p,{content:m,toggleModal:n.toggleModal})})}else if("class-btn"===r){var u=c.title,j=c.options,v=c.name,O=c.value,h="second"===l?O.second:O.first,y=Object(g.jsx)(f,{id:s,title:u,name:v,value:h,inputHandler:d,options:j});n.setState({modal:Object(g.jsx)(p,{content:y,toggleModal:n.toggleModal})})}else if("race-btn"===r){var x=o.title,N=o.options,C=o.name,P=o.value,S="second"===l?P.second:P.first,R=Object(g.jsx)(f,{id:s,title:x,name:C,value:S,inputHandler:d,options:N});n.setState({modal:Object(g.jsx)(p,{content:R,toggleModal:n.toggleModal})})}else if("icon-plus"===r){if(e.stopPropagation(),"gameClass"===l)return n.secondClass.current.classList.remove("hidden");if("gameRace"===l)return n.secondRace.current.classList.remove("hidden")}else if("icon-minus"===r){if(e.stopPropagation(),"gameClass"===l)return t(s,l,n.props.gameInfo.defaultClass,"second"),void n.secondClass.current.classList.add("hidden");if("gameRace"===l)return t(s,l,n.props.gameInfo.defaultRace,"second"),void n.secondRace.current.classList.add("hidden")}n.toggleModal()},n.state={isInfoEdited:!1,modal:null,gameClassOptions:{title:"\u041a\u043b\u0430\u0441\u0441",options:Object(c.a)(e.gameInfo.classOptions),name:"gameClass",value:n.props.gameClass},gameRaceOptions:{title:"\u0420\u0430\u0441\u0441\u0430",options:Object(c.a)(e.gameInfo.raceOptions),name:"gameRace",value:n.props.gameRace}},n.secondClass=s.a.createRef(),n.secondRace=s.a.createRef(),n}return Object(d.a)(t,[{key:"render",value:function(){var e=this.props,a=e.gameRace,t=e.gameClass,n=e.gender,s=this.state,r=s.isInfoEdited,l=s.modal;return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)("div",{className:"players-cards__item__game-info",children:[Object(g.jsxs)("button",{className:"race-btn first",onClick:this.clickHandler,children:[a.first,Object(g.jsx)("span",{title:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432\u0442\u043e\u0440\u0443\u044e \u0440\u0430\u0441\u0441\u0443",className:"icon-plus gameRace"})]}),Object(g.jsxs)("button",{ref:this.secondRace,className:"race-btn second hidden",onClick:this.clickHandler,children:[a.second,Object(g.jsx)("span",{title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u0442\u043e\u0440\u0443\u044e \u0440\u0430\u0441\u0441\u0443",className:"icon-minus gameRace"})]}),Object(g.jsxs)("button",{className:"class-btn first",onClick:this.clickHandler,children:[t.first,Object(g.jsx)("span",{title:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432\u0442\u043e\u0440\u043e\u0439 \u043a\u043b\u0430\u0441\u0441",className:"icon-plus gameClass"})]}),Object(g.jsxs)("button",{ref:this.secondClass,className:"class-btn second hidden",onClick:this.clickHandler,children:[t.second,Object(g.jsx)("span",{title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u0442\u043e\u0440\u043e\u0439 \u043a\u043b\u0430\u0441\u0441",className:"icon-minus gameClass"})]}),Object(g.jsx)("button",{className:"gender-btn",onClick:this.clickHandler,children:n||"\u041f\u043e\u043b \u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d"})]}),r&&l]})}}]),t}(n.Component);var O=function(e){var a=e.regulateLevel,t=e.id,n=e.level;return Object(g.jsxs)("div",{className:"players-cards__item__level",children:[Object(g.jsx)("p",{className:"level-label",children:"\u0423\u0440\u043e\u0432\u0435\u043d\u044c"}),Object(g.jsxs)("p",{className:"level-regulation-container",children:[Object(g.jsx)("span",{className:"level-reducer icon-minus",onClick:function(e){return a(e,t)}})," ",Object(g.jsxs)("span",{className:"level-container",children:[n," "]}),Object(g.jsx)("span",{className:"level-adder icon-plus",onClick:function(e){return a(e,t)}})]})]})};var h=function(e){var a=e.players,t=e.deletePlayer,n=e.regulateLevel,s=e.editPlayerInfo,r=e.gameInfo,l=a.map((function(e){var a=e.name,l=e.gameRace,c=e.gameClass,i=e.level,o=e.id,d=e.gender;return Object(g.jsxs)("div",{className:"players-cards__item",children:[Object(g.jsx)(j,{name:a,id:o,deletePlayer:t}),Object(g.jsx)(v,{gender:d,gameRace:l,gameClass:c,editPlayerInfo:s,id:o,gameInfo:r}),Object(g.jsx)(O,{id:o,level:i,regulateLevel:n})]},o)}));return Object(g.jsx)("div",{className:"players-cards",children:l})};var y=function(e){var a=e.players,t=e.deletePlayer,n=a.map((function(e){var a=e.id,n=e.name;return Object(g.jsxs)("li",{children:[n," ",Object(g.jsx)("span",{className:"players-container__discard-icon icon-bin",onClick:function(){return t(a)}})]},a)}));return Object(g.jsx)("ul",{className:"players-container__names",children:n})};var x=function(e){var a=e.players,t=e.isGameStarted,n=e.deletePlayer,s=e.regulateLevel,r=e.editPlayerInfo,l=e.gameInfo,c=t?Object(g.jsx)(h,{players:a,deletePlayer:n,regulateLevel:s,editPlayerInfo:r,gameInfo:l}):Object(g.jsx)(y,{players:a,deletePlayer:n});return Object(g.jsxs)("div",{className:"players-container".concat(t?" solo":""),children:[Object(g.jsx)("h2",{className:"header",children:"\u0418\u0433\u0440\u043e\u043a\u0438"}),a.length?c:Object(g.jsx)("p",{className:"empty-list",children:"\u0421\u043f\u0438\u0441\u043e\u043a \u0438\u0433\u0440\u043e\u043a\u043e\u0432 \u043f\u0443\u0441\u0442"})]})};t(18);var N=function(e){var a=e.name,t=e.inputHandler,n=e.inputRef,s=e.errorMessage;return Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)("div",{className:"form__name-input",children:[Object(g.jsx)("label",{htmlFor:"name",children:"\u0418\u043c\u044f"}),Object(g.jsx)("input",{name:"name",id:"name",type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f",value:a,onChange:t,onKeyDown:t,ref:n}),Object(g.jsx)("p",{className:"form__error-message",ref:s,children:"\u0423 \u043c\u0430\u043d\u0447\u043a\u0438\u043d\u0430 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0438\u043c\u044f!"})]})})},C=function(e){Object(m.a)(t,e);var a=Object(u.a)(t);function t(e){var n;return Object(o.a)(this,t),(n=a.call(this,e)).changeHandler=function(e){"name"===e.target.id&&e.target.value&&(n.errorMessage.current.style.visibility="hidden");var a=Object(i.a)({},n.state.player);"gameClass"===e.target.name||"gameRace"===e.target.name?a[e.target.name].first=e.target.value:a[e.target.name]=e.target.value,n.setState({player:a})},n.buttonHandler=function(){if(n.state.player.name){var e=Object(i.a)({},n.state.player);n.props.addNewPlayer(e),n.resetInputValues()}else n.errorMessage.current.style.visibility="visible",n.nameInput.current.focus()},n.resetInputValues=function(){n.setState({player:Object(i.a)({},JSON.parse(JSON.stringify(n.props.emptyPlayer)))})},n.state={player:Object(i.a)({},JSON.parse(JSON.stringify(n.props.emptyPlayer)))},n.errorMessage=s.a.createRef(),n.nameInput=s.a.createRef(),n}return Object(d.a)(t,[{key:"submitHandler",value:function(e){e.preventDefault()}},{key:"render",value:function(){var e=this,a=this.props.gameInfo,t=a.raceOptions,n=a.classOptions,s=this.state.player,r=s.name,l=s.gameClass,i=s.gameRace,o=[{title:"\u0420\u0430\u0441\u0430",options:Object(c.a)(t),name:"gameRace",value:i.first},{title:"\u041a\u043b\u0430\u0441\u0441",options:Object(c.a)(n),name:"gameClass",value:l.first}];return Object(g.jsxs)("form",{className:"form",action:"/",method:"POST",name:"playerInfo",onSubmit:this.submitHandler,children:[Object(g.jsx)(N,{name:r,inputHandler:this.changeHandler,errorMessage:this.errorMessage,inputRef:this.nameInput}),o.map((function(a,t){var n=a.title,s=a.options,r=a.value,l=a.name;return Object(g.jsx)(f,{title:n,name:l,value:r,inputHandler:e.changeHandler,options:s},t)})),Object(g.jsx)("button",{className:"form__add-player-btn",onClick:this.buttonHandler,children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0438\u0433\u0440\u043e\u043a\u0430"})]})}}]),t}(n.Component);var P=function(e){var a=e.addNewPlayer,t=e.gameInfo,n=e.emptyPlayer;return Object(g.jsxs)("div",{className:"preset-container",children:[Object(g.jsx)("h2",{className:"header",children:"\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u0438\u0433\u0440\u043e\u043a\u043e\u0432"}),Object(g.jsx)(C,{addNewPlayer:a,gameInfo:t,emptyPlayer:n})]})};t(19);var S=function(e){var a=e.text,t=e.closeWarning,n=e.winner,s=e.manageGame,r=n?"\u041f\u043e\u0431\u0435\u0434\u0438\u0442\u0435\u043b\u044c: ".concat(n.name,"!"):a,l=n?"\u0421\u044b\u0433\u0440\u0430\u0442\u044c \u0441\u043d\u043e\u0432\u0430":"\u041e\u041a";return Object(g.jsxs)("div",{className:"warning",children:[Object(g.jsx)("p",{className:"warning__text",children:r}),Object(g.jsx)("button",{className:"warning__close-btn",onClick:function(e){return function(e){"\u0421\u044b\u0433\u0440\u0430\u0442\u044c \u0441\u043d\u043e\u0432\u0430"===e.target.innerText&&s(),t()}(e)},children:l})]})},R={classOptions:["\u041d\u0435\u0442 \u043a\u043b\u0430\u0441\u0441\u0430","\u0412\u043e\u043b\u0448\u0435\u0431\u043d\u0438\u043a","\u0412\u043e\u0440","\u041a\u043b\u0438\u0440\u0438\u043a","\u0412\u043e\u0438\u043d"],raceOptions:["\u041d\u0435\u0442 \u0440\u0430\u0441\u044b","\u042d\u043b\u044c\u0444","\u0425\u0430\u0444\u043b\u0438\u043d\u0433","\u0414\u0432\u0430\u0440\u0444"],defaultClass:"\u041d\u0435\u0442 \u043a\u043b\u0430\u0441\u0441\u0430",defaultRace:"\u041d\u0435\u0442 \u0440\u0430\u0441\u044b",minLevel:1,winLevel:10,minPlayersNumber:2,maxPlayersNumber:6},w={players:[],isGameStarted:!1,winner:null,warning:{isNeeded:!1,value:""}},I={name:"",gameClass:{first:"\u041d\u0435\u0442 \u043a\u043b\u0430\u0441\u0441\u0430",second:"\u041d\u0435\u0442 \u043a\u043b\u0430\u0441\u0441\u0430"},gameRace:{first:"\u041d\u0435\u0442 \u0440\u0430\u0441\u0441\u044b",second:"\u041d\u0435\u0442 \u0440\u0430\u0441\u0441\u044b"},gender:null},_=function(e){Object(m.a)(t,e);var a=Object(u.a)(t);function t(e){var n;return Object(o.a)(this,t),(n=a.call(this,e)).addNewPlayer=function(e){if(!!n.checkPlayersNumber("max")){var a=Date.now(),t=R.minLevel,s=Object(i.a)(Object(i.a)({},e),{},{id:a,level:t}),r=[].concat(Object(c.a)(n.state.players),[s]);return n.setState({players:r})}n.showWarning("\u0412\u044b \u0434\u043e\u0431\u0430\u0432\u0438\u043b\u0438 \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0438\u0433\u0440\u043e\u043a\u043e\u0432!")},n.deletePlayer=function(e){var a=Object(c.a)(n.state.players).filter((function(a){return a.id!==e}));if(a.length)return n.setState({players:a});n.state.isGameStarted;return!1,n.setState({players:a,isGameStarted:false})},n.checkPlayersNumber=function(e){switch(e){case"min":return n.state.players.length>=R.minPlayersNumber;case"max":return n.state.players.length<R.maxPlayersNumber}},n.showWarning=function(e){var a=Object(i.a)({},n.state.warning);return a.isNeeded=!0,a.value=e||"\u0423\u043f\u0441! \u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a!",n.setState({warning:a})},n.closeWarning=function(){var e=Object(i.a)({},n.state.warning);return e.isNeeded=!1,n.setState({warning:e})},n.resetGame=function(){return n.setState(Object(i.a)({},w))},n.manageGame=function(){if(n.state.winner)return n.resetGame();if(n.checkPlayersNumber("min"))n.setState((function(e){return{isGameStarted:!e.isGameStarted}}));else{var e=n.state.players,a="\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u0435\u0449\u0451 \u043c\u0438\u043d\u0438\u043c\u0443\u043c ".concat(R.minPlayersNumber-e.length," \u0438\u0433\u0440\u043e\u043a\u0430");n.showWarning(a)}},n.regulateLevel=function(e,a){var t=e.target.classList.contains("level-reducer"),s=R.minLevel,r=R.winLevel,l=Object(c.a)(n.state.players),i=l.filter((function(e){return e.id===a}))[0];t?i.level>s&&i.level--:i.level<r&&i.level++,i.level===r&&(n.setState({winner:i}),n.showWarning()),n.setState({players:l})},n.editPlayerInfo=function(e,a,t,s){var r=Object(c.a)(n.state.players),l=r.filter((function(a){return a.id===e}))[0];"gameClass"!==a&&"gameRace"!==a||"first"!==s?"gameClass"!==a&&"gameRace"!==a||"second"!==s?l[a]=t:l[a].second=t:l[a].first=t,n.setState({players:r})},n.state=Object(i.a)({},w),n}return Object(d.a)(t,[{key:"render",value:function(){var e=this.state,a=e.isGameStarted,t=e.players,n=e.warning,s=e.winner;return Object(g.jsxs)(g.Fragment,{children:[(!a||!t.length)&&Object(g.jsx)(P,{addNewPlayer:this.addNewPlayer,gameInfo:R,emptyPlayer:I}),Object(g.jsx)(x,{players:t,isGameStarted:a,deletePlayer:this.deletePlayer,regulateLevel:this.regulateLevel,editPlayerInfo:this.editPlayerInfo,gameInfo:R}),!a&&Object(g.jsx)("button",{className:"start-game-btn",onClick:this.manageGame,children:"\u041d\u0430\u0447\u0430\u0442\u044c \u0438\u0433\u0440\u0443"}),n.isNeeded&&Object(g.jsx)(S,{text:n.value,winner:s,closeWarning:this.closeWarning,manageGame:this.manageGame})]})}}]),t}(n.Component);l.a.render(Object(g.jsx)(s.a.StrictMode,{children:Object(g.jsx)(_,{})}),document.getElementById("root"))}],[[20,1,2]]]);
//# sourceMappingURL=main.2a2e0210.chunk.js.map